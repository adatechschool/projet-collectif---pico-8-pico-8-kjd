pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- test
-- delhia

function _init()

map(0,0,0,0,15,15)
create_player()
create_enemy()


end 

function _update60()

--player

mouv_player()

--enemies

   mouv_enemy()

 enemies={}
 
 if #enemies== 0 then
   spawn_enemies(ceil(rnd(10)))
 end 
 
end


function _draw() 

cls()

map(0,0,0,0,15,15)

--hero

draw_player()

--enemies

draw_enemy()

end 
-->8
 function create_enemy()

e = { 
x1=rnd(13),
y1=rnd(7),
sprite=5,
speed=0.25}

end 

function draw_enemy()
	for e in all(enemies) do 
		spr(5,e.x1,e.y1) 
	end
end 

function mouv_enemy()

 newx1= e.x1
 newy1= e.y1

if (btn(➡️)) newx1+=e.speed*rnd(13)
if (btn(⬅️)) newx1-=e.speed*rnd(13)
if (btn(⬆️)) newy1-=e.speed*rnd(7)
if (btn(⬇️)) newy1+=e.speed*rnd(7)

end 

-- faire apparaitre aleatoirement les ennemis
-- sans qu'ils se supperposent
function spawn_enemies(amount)
gap=(128-8*amount)/(amount+1)
 
 for i=1,amount do 
 	 add(enemies,{x1=gap*i + 8*(i-1),
 	 y1=ceil(rnd(120)),
 	 sprite=5,
 	 speed=0,1})
 end	  
end 

--	if not check_flag(0,newx1,newy1) 
--		then 
-- pas d'obstacle donc on avance
--				e.x1=newx1
--				e.y1=newy1
---		end
--end
-->8
--player

function create_player()

p = {sprite=4,
x=25,
y=25,
speed=0,5}

end 

function mouv_player()

newx= p.x
newy= p.y

if (btn(➡️)) newx+=1
if (btn(⬅️)) newx-=1
if (btn(⬇️)) newy+=1
if (btn(⬆️)) newy-=1
 

	if not check_flag(0,newx,newy) 
	then 
-- pas d'obstacle donc on avance
			 p.x=newx
				p.y=newy
		end
		
end 


function draw_player()

spr(4,p.x,p.y)

end 
-->8
-- check flag 

function check_flag(flag,x,y)

local sprite= mget(x,y)

return fget(sprite,0)
 end 

__gfx__
00000000333333333333333333bbb333355555333551113322222222000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333333333b333bbbbb335544453335ddd13322222222000000000000000000000000000000000000000000000000000000000000000000000000
007007003333333333333333bbbbbbb35414155335ada13322222222000000000000000000000000000000000000000000000000000000000000000000000000
000770003333333333333333bbbbbbbb5444445355ddd11322222222000000000000000000000000000000000000000000000000000000000000000000000000
000770003333333333b333333bb44bb3344884333331333322222222000000000000000000000000000000000000000000000000000000000000000000000000
00700700333333333333333333344333499999433d115d3322222222000000000000000000000000000000000000000000000000000000000000000000000000
0000000033333333333333b333444433339993333311533322222222000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333333333333355444455339393333313533322222222000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0101010303020203030103030301010102020300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010201010202030101030301030103030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101020201010201030202030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010201010101030102030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010201010101010103020101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010203010201010101020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0301010101010101010101010201010302010300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0301010301010101010101010201010102030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202010201010101010101010201010102030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202010101010101010102010101010302030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010103010303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020301010101010101010102010303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202030303020303030201030303010303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302010202020302020201010101020103030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303010303030202020303030303010103000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303010101010303020303030303030301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0301010101010103030303030303030301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010103030201030103030301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101020301010103010203030101030301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0103030302010101010303030101020301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0103030301020201010101010303030301000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000017650176503d6503d6503c6503b6503a6503765035650326503365031650006002d6502c6502a6502665025650246502265021650206501e6501d6501c65019650186501465011650116500060000600
000200003b0503a0503a0503805037050350503305032050000002e0502c0500000029050000002605023050000001f050000001d0501b050170501405012050110500e0500d0500c0500b0500a0500a05009050
00100000316500000000000000002f65000000000000000000000000000000019650000000000000000000002765000000000000000031650000000000000000000002d650000000000000000000000000000000
__music__
00 01024344

